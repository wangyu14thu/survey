<!--ç®¡ç†åå°é¡µé¢-->
<view class="admin-container">
  <view class="admin-header">
    <text class="header-title">ç®¡ç†åå°</text>
    <text class="header-subtitle">æ•°æ®æ¦‚è§ˆä¸ç®¡ç†</text>
  </view>

  <!-- ç»Ÿè®¡å¡ç‰‡ -->
  <view class="stats-grid">
    <view class="stat-card">
      <text class="stat-icon">ğŸ—³ï¸</text>
      <text class="stat-number">{{stats.totalVotes}}</text>
      <text class="stat-label">æ€»æŠ•ç¥¨æ•°</text>
    </view>
    <view class="stat-card">
      <text class="stat-icon">ğŸ‘¥</text>
      <text class="stat-number">{{stats.totalUsers}}</text>
      <text class="stat-label">æ³¨å†Œç”¨æˆ·</text>
    </view>
    <view class="stat-card">
      <text class="stat-icon">ğŸ“š</text>
      <text class="stat-number">{{stats.totalOrders}}</text>
      <text class="stat-label">è¯¾ç¨‹è®¢å•</text>
    </view>
    <view class="stat-card">
      <text class="stat-icon">ğŸ“·</text>
      <text class="stat-number">{{stats.totalAlbums}}</text>
      <text class="stat-label">ç›¸å†Œæ•°é‡</text>
    </view>
  </view>

  <!-- æŠ•ç¥¨ç®¡ç† -->
  <view class="management-section">
    <view class="section-header">
      <text class="section-title">æŠ•ç¥¨ç®¡ç†</text>
    </view>
    
    <view class="vote-results card">
      <view class="results-header">
        <text class="results-title">å„ä¸»é¢˜ç¥¨æ•°ç»Ÿè®¡</text>
        <button class="btn-action" bindtap="refreshVotes">åˆ·æ–°</button>
      </view>
      
      <view class="results-list">
        <view class="result-item" wx:for="{{voteResults}}" wx:key="id">
          <view class="result-left">
            <text class="result-rank">{{index + 1}}</text>
            <text class="result-name">{{item.themeName}}</text>
          </view>
          <view class="result-right">
            <text class="result-votes">{{item.votes}}ç¥¨</text>
            <text class="result-percent">{{item.percent}}%</text>
          </view>
        </view>
      </view>
      
      <view class="vote-controls">
        <button class="btn-control" bindtap="endVote">æˆªæ­¢æŠ•ç¥¨</button>
        <button class="btn-control primary" bindtap="publishResult">å…¬å¸ƒç»“æœ</button>
      </view>
    </view>
  </view>

  <!-- è¯¾ç¨‹æŠ¥åç®¡ç† -->
  <view class="management-section">
    <view class="section-header">
      <text class="section-title">è¯¾ç¨‹æŠ¥åç®¡ç†</text>
    </view>
    
    <view class="course-list card">
      <view class="course-item" wx:for="{{courses}}" wx:key="id">
        <view class="course-info">
          <text class="course-name">{{item.title}}</text>
          <view class="course-progress">
            <view class="progress-bar">
              <view class="progress-fill" style="width: {{(item.enrolled / item.quota) * 100}}%;"></view>
            </view>
            <text class="progress-text">{{item.enrolled}}/{{item.quota}}äºº</text>
          </view>
        </view>
        <button class="btn-manage" bindtap="manageCourse" data-id="{{item.id}}">ç®¡ç†åé¢</button>
      </view>
    </view>
  </view>

  <!-- æ•°æ®å¯¼å‡º -->
  <view class="management-section">
    <view class="section-header">
      <text class="section-title">æ•°æ®å¯¼å‡º</text>
    </view>
    
    <view class="export-card card">
      <button class="btn-export" bindtap="exportVotes">å¯¼å‡ºæŠ•ç¥¨æ•°æ®</button>
      <button class="btn-export" bindtap="exportUsers">å¯¼å‡ºç”¨æˆ·æ•°æ®</button>
      <button class="btn-export" bindtap="exportOrders">å¯¼å‡ºè®¢å•æ•°æ®</button>
    </view>
  </view>
</view>

