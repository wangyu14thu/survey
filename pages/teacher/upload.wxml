<!--教师上传照片页面-->
<view class="upload-container">
  <view class="upload-header">
    <text class="header-title">上传活动照片</text>
    <text class="header-subtitle">请选择班级并上传照片</text>
  </view>

  <view class="upload-form">
    <!-- 活动名称 -->
    <view class="form-item">
      <view class="label">
        <text class="label-text">活动名称</text>
        <text class="required">*</text>
      </view>
      <input 
        class="input" 
        placeholder="如：绿色地球主题实践" 
        value="{{formData.activityName}}"
        bindinput="onInputChange"
        data-field="activityName"
      />
    </view>

    <!-- 学校选择 -->
    <view class="form-item">
      <view class="label">
        <text class="label-text">学校</text>
        <text class="required">*</text>
      </view>
      <picker 
        mode="selector" 
        range="{{schoolList}}" 
        value="{{schoolIndex}}"
        bindchange="onSchoolChange">
        <view class="picker {{schoolIndex === -1 ? 'placeholder' : ''}}">
          {{schoolIndex === -1 ? '请选择学校' : schoolList[schoolIndex]}}
          <text class="arrow">›</text>
        </view>
      </picker>
    </view>

    <!-- 年级选择 -->
    <view class="form-item">
      <view class="label">
        <text class="label-text">年级</text>
        <text class="required">*</text>
      </view>
      <picker 
        mode="selector" 
        range="{{gradeList}}" 
        value="{{gradeIndex}}"
        bindchange="onGradeChange">
        <view class="picker {{gradeIndex === -1 ? 'placeholder' : ''}}">
          {{gradeIndex === -1 ? '请选择年级' : gradeList[gradeIndex]}}
          <text class="arrow">›</text>
        </view>
      </picker>
    </view>

    <!-- 班级选择 -->
    <view class="form-item">
      <view class="label">
        <text class="label-text">班级</text>
        <text class="required">*</text>
      </view>
      <picker 
        mode="selector" 
        range="{{classList}}" 
        value="{{classIndex}}"
        bindchange="onClassChange"
        disabled="{{gradeIndex === -1}}">
        <view class="picker {{classIndex === -1 ? 'placeholder' : ''}}">
          {{classIndex === -1 ? '请先选择年级' : classList[classIndex]}}
          <text class="arrow">›</text>
        </view>
      </picker>
    </view>

    <!-- 照片上传 -->
    <view class="form-item">
      <view class="label">
        <text class="label-text">活动照片</text>
        <text class="required">*</text>
        <text class="photo-count">{{photos.length}}/30</text>
      </view>
      <view class="photo-upload-area">
        <view class="photo-list">
          <view class="photo-item" wx:for="{{photos}}" wx:key="index">
            <image class="photo-preview" src="{{item}}" mode="aspectFill"></image>
            <view class="photo-remove" bindtap="removePhoto" data-index="{{index}}">
              <text class="remove-icon">×</text>
            </view>
          </view>
          <view class="photo-add" bindtap="choosePhoto" wx:if="{{photos.length < 30}}">
            <text class="add-icon">+</text>
            <text class="add-text">添加照片</text>
          </view>
        </view>
      </view>
      <view class="upload-tip">
        <text class="tip-icon">ℹ️</text>
        <text class="tip-text">每次最多上传30张照片，建议选择高清照片</text>
      </view>
    </view>

    <button 
      class="btn-submit {{canSubmit ? 'btn-primary' : 'btn-disabled'}}" 
      bindtap="submitUpload"
      disabled="{{!canSubmit || uploading}}">
      {{uploading ? '上传中...' : '确认上传'}}
    </button>
  </view>
</view>

