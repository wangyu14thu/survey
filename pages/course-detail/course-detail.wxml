<!--è¯¾ç¨‹è¯¦æƒ…é¡µé¢-->
<view class="detail-container">
  <!-- è¯¾ç¨‹å°é¢ -->
  <view class="course-header">
    <image class="header-image" src="{{course.cover}}" mode="aspectFill"></image>
    <view class="header-overlay">
      <text class="course-title">{{course.title}}</text>
      <text class="course-subtitle">{{course.subtitle}}</text>
    </view>
  </view>

  <!-- è¯¾ç¨‹è¯¦æƒ… -->
  <view class="course-content">
    <!-- ä»·æ ¼ä¸åé¢ -->
    <view class="price-section card">
      <view class="price-info">
        <view class="price-main">
          <text class="price-symbol">Â¥</text>
          <text class="price-value">{{course.price}}</text>
          <text class="price-original" wx:if="{{course.originalPrice}}">Â¥{{course.originalPrice}}</text>
        </view>
        <view class="quota-info">
          <text class="quota-number">{{course.quota - course.enrolled}}</text>
          <text class="quota-text">ä¸ªåé¢å‰©ä½™</text>
        </view>
      </view>
      <view class="progress-bar">
        <view class="progress-fill" style="width: {{(course.enrolled / course.quota) * 100}}%;"></view>
      </view>
      <text class="progress-text">å·²æœ‰{{course.enrolled}}äººæŠ¥å</text>
    </view>

    <!-- è¯¾ç¨‹äº®ç‚¹ -->
    <view class="highlights-section card">
      <view class="section-title">
        <text class="title-icon">âœ¨</text>
        <text>è¯¾ç¨‹äº®ç‚¹</text>
      </view>
      <view class="highlights-list">
        <view class="highlight-item" wx:for="{{course.highlights}}" wx:key="index">
          <text class="item-dot"></text>
          <text class="item-text">{{item}}</text>
        </view>
      </view>
    </view>

    <!-- è¯¾ç¨‹ä»‹ç» -->
    <view class="intro-section card">
      <view class="section-title">
        <text class="title-icon">ğŸ“</text>
        <text>è¯¾ç¨‹ä»‹ç»</text>
      </view>
      <text class="intro-text">{{course.description}}</text>
    </view>

    <!-- è¯¾ç¨‹å®‰æ’ -->
    <view class="schedule-section card" wx:if="{{course.schedule}}">
      <view class="section-title">
        <text class="title-icon">ğŸ“…</text>
        <text>è¯¾ç¨‹å®‰æ’</text>
      </view>
      <view class="schedule-list">
        <view class="schedule-item" wx:for="{{course.schedule}}" wx:key="day">
          <view class="schedule-day">ç¬¬{{item.day}}å¤©</view>
          <view class="schedule-content">
            <text class="schedule-title">{{item.title}}</text>
            <text class="schedule-detail">{{item.content}}</text>
          </view>
        </view>
      </view>
    </view>

    <!-- è¯¾ç¨‹ä¿¡æ¯ -->
    <view class="info-section card">
      <view class="section-title">
        <text class="title-icon">â„¹ï¸</text>
        <text>è¯¾ç¨‹ä¿¡æ¯</text>
      </view>
      <view class="info-list">
        <view class="info-item">
          <text class="info-label">é€‚åˆå¹´é¾„</text>
          <text class="info-value">{{course.suitable}}</text>
        </view>
        <view class="info-item">
          <text class="info-label">æ´»åŠ¨åœ°ç‚¹</text>
          <text class="info-value">{{course.location}}</text>
        </view>
        <view class="info-item">
          <text class="info-label">æ´»åŠ¨æ—¶é•¿</text>
          <text class="info-value">{{course.duration}}</text>
        </view>
      </view>
    </view>

    <!-- è´¹ç”¨åŒ…å« -->
    <view class="includes-section card" wx:if="{{course.includes}}">
      <view class="section-title">
        <text class="title-icon">ğŸ’°</text>
        <text>è´¹ç”¨åŒ…å«</text>
      </view>
      <view class="includes-list">
        <view class="include-item" wx:for="{{course.includes}}" wx:key="index">
          <text class="include-dot">âœ“</text>
          <text class="include-text">{{item}}</text>
        </view>
      </view>
    </view>

    <!-- å›¾ç‰‡å±•ç¤º -->
    <view class="images-section card" wx:if="{{course.images}}">
      <view class="section-title">
        <text class="title-icon">ğŸ“·</text>
        <text>ç²¾å½©ç¬é—´</text>
      </view>
      <view class="images-grid">
        <image 
          class="grid-image" 
          wx:for="{{course.images}}" 
          wx:key="index"
          src="{{item}}" 
          mode="aspectFill"
          bindtap="previewImage"
          data-urls="{{course.images}}"
          data-index="{{index}}">
        </image>
      </view>
    </view>
  </view>

  <!-- åº•éƒ¨æ“ä½œæ  -->
  <view class="bottom-bar">
    <view class="bar-left">
      <text class="bar-price">Â¥{{course.price}}</text>
      <text class="bar-tip">èµ·</text>
    </view>
    <button 
      class="btn-enroll {{course.enrolled >= course.quota ? 'btn-disabled' : 'btn-primary'}}" 
      bindtap="enrollCourse"
      disabled="{{course.enrolled >= course.quota}}">
      {{course.enrolled >= course.quota ? 'åé¢å·²æ»¡' : 'ç«‹å³æŠ¥å'}}
    </button>
  </view>
</view>

