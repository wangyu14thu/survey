<!--æˆé•¿è®°å½•é¡µé¢-->
<view class="records-container">
  <!-- ä¸Šä¼ æŒ‰é’®ï¼ˆä»…è€å¸ˆå¯è§ï¼‰ -->
  <view class="upload-section" wx:if="{{canUpload}}">
    <button class="btn-upload" bindtap="showUploadOptions">
      <text class="upload-icon">ğŸ“</text>
      <text class="upload-text">å‘å¸ƒæˆé•¿è®°å½•</text>
    </button>
  </view>

  <!-- è®°å½•åˆ—è¡¨ -->
  <view class="records-list" wx:if="{{records.length > 0}}">
    <view class="record-item" wx:for="{{records}}" wx:key="_id">
      <!-- ä½œè€…ä¿¡æ¯ -->
      <view class="record-header">
        <view class="author-info">
          <text class="author-avatar">{{item.authorRole === 'teacher' ? 'ğŸ‘¨â€ğŸ«' : 'ğŸ“'}}</text>
          <view class="author-detail">
            <text class="author-name">{{item.authorName}}</text>
            <text class="author-school">{{item.school}}</text>
          </view>
        </view>
        <text class="record-time">{{item.createTimeText}}</text>
      </view>

      <!-- æ–‡å­—å†…å®¹ -->
      <view class="record-content" wx:if="{{item.content}}">
        <text class="content-text">{{item.content}}</text>
      </view>

      <!-- å›¾ç‰‡ -->
      <view class="record-images" wx:if="{{item.images && item.images.length > 0}}">
        <image class="record-image" 
               wx:for="{{item.images}}" 
               wx:for-item="img" 
               wx:key="*this"
               src="{{img}}" 
               mode="aspectFill"
               bindtap="previewImage"
               data-url="{{img}}"
               data-urls="{{item.images}}"></image>
      </view>

      <!-- äº’åŠ¨æ  -->
      <view class="record-actions">
        <view class="action-item" bindtap="commentRecord" data-id="{{item._id}}">
          <text class="action-icon">ğŸ’¬</text>
          <text class="action-text">è¯„è®º</text>
        </view>
      </view>

      <!-- è¯„è®ºåˆ—è¡¨ -->
      <view class="comments-section" wx:if="{{item.comments && item.comments.length > 0}}">
        <view class="comment-item" wx:for="{{item.comments}}" wx:for-item="comment" wx:key="index">
          <text class="comment-author">{{comment.authorName}}ï¼š</text>
          <text class="comment-content">{{comment.content}}</text>
        </view>
      </view>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-state" wx:if="{{records.length === 0}}">
    <text class="empty-icon">ğŸ“‹</text>
    <text class="empty-text">æš‚æ— æˆé•¿è®°å½•</text>
    <text class="empty-tip" wx:if="{{canUpload}}">å¿«æ¥å‘å¸ƒç¬¬ä¸€æ¡è®°å½•å§</text>
    <text class="empty-tip" wx:else>ç­‰å¾…è€å¸ˆå‘å¸ƒè®°å½•</text>
  </view>
</view>

