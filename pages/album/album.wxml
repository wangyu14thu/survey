<!--äº‘ç«¯ç›¸å†Œé¡µé¢-->
<view class="album-container">
  <view class="album-header">
    <text class="header-title">äº‘ç«¯ç›¸å†Œ</text>
    <text class="header-subtitle">è®°å½•æ¯ä¸€ä¸ªç²¾å½©ç¬é—´</text>
  </view>

  <!-- æˆ‘çš„ç­çº§ç›¸å†Œ -->
  <view class="my-class-section" wx:if="{{myClassAlbum && myClassAlbum.photos.length > 0}}">
    <view class="section-header">
      <view class="header-left">
        <text class="section-icon">ğŸ¯</text>
        <text class="section-title">æˆ‘çš„ç­çº§</text>
      </view>
      <view class="class-badge">{{userInfo.className}}</view>
    </view>
    
    <view class="album-card featured">
      <view class="album-info">
        <text class="album-title">{{myClassAlbum.activityName}}</text>
        <text class="album-meta">{{myClassAlbum.date}} Â· {{myClassAlbum.photos.length}}å¼ ç…§ç‰‡</text>
      </view>
      <view class="photo-grid">
        <image 
          class="photo-item" 
          wx:for="{{myClassAlbum.photos}}" 
          wx:key="index"
          wx:if="{{index < 6}}"
          src="{{item.url}}" 
          mode="aspectFill"
          bindtap="previewPhoto"
          data-urls="{{myClassAlbum.photoUrls}}"
          data-index="{{index}}">
        </image>
        <view class="photo-more" wx:if="{{myClassAlbum.photos.length > 6}}" bindtap="viewAlbumDetail" data-album="{{myClassAlbum}}">
          <text class="more-text">+{{myClassAlbum.photos.length - 6}}</text>
        </view>
      </view>
      <view class="album-actions">
        <button class="action-btn" bindtap="downloadAll" data-album="{{myClassAlbum}}">
          <text class="btn-icon">ğŸ“¥</text>
          <text class="btn-text">ä¿å­˜å…¨éƒ¨</text>
        </button>
        <button class="action-btn" bindtap="shareAlbum" data-album="{{myClassAlbum}}">
          <text class="btn-icon">ğŸ“¤</text>
          <text class="btn-text">åˆ†äº«</text>
        </button>
      </view>
    </view>
  </view>

  <!-- å…¨æ ¡ç²¾å½©ç¬é—´ -->
  <view class="school-section" wx:if="{{schoolAlbums.length > 0}}">
    <view class="section-header">
      <view class="header-left">
        <text class="section-icon">ğŸ«</text>
        <text class="section-title">å…¨æ ¡ç²¾å½©ç¬é—´</text>
      </view>
    </view>

    <view class="albums-list">
      <view class="album-card" wx:for="{{schoolAlbums}}" wx:key="id" bindtap="viewAlbumDetail" data-album="{{item}}">
        <view class="album-cover">
          <image class="cover-image" src="{{item.cover}}" mode="aspectFill"></image>
          <view class="cover-badge">{{item.className}}</view>
        </view>
        <view class="album-info">
          <text class="album-title">{{item.activityName}}</text>
          <text class="album-meta">{{item.date}} Â· {{item.photoCount}}å¼ ç…§ç‰‡</text>
        </view>
      </view>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-state" wx:if="{{!myClassAlbum && schoolAlbums.length === 0}}">
    <image class="empty-image" src="/images/empty-album.png" mode="aspectFit"></image>
    <text class="empty-text">è¿˜æ²¡æœ‰æ´»åŠ¨ç…§ç‰‡</text>
    <text class="empty-tip">å®è·µæ´»åŠ¨ç»“æŸåï¼Œè€å¸ˆä¼šä¸Šä¼ ç…§ç‰‡å“¦</text>
  </view>

  <!-- æ•™å¸ˆå…¥å£ -->
  <view class="teacher-entry" wx:if="{{isTeacher}}" bindtap="navigateToUpload">
    <text class="entry-icon">ğŸ“·</text>
    <text class="entry-text">æ•™å¸ˆä¸Šä¼ ç…§ç‰‡</text>
  </view>
</view>

